<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Getting started with Cropbox · Cropbox.jl</title><meta name="title" content="Getting started with Cropbox · Cropbox.jl"/><meta property="og:title" content="Getting started with Cropbox · Cropbox.jl"/><meta property="twitter:title" content="Getting started with Cropbox · Cropbox.jl"/><meta name="description" content="Documentation for Cropbox.jl."/><meta property="og:description" content="Documentation for Cropbox.jl."/><meta property="twitter:description" content="Documentation for Cropbox.jl."/><meta property="og:url" content="https://cropbox.github.io/Cropbox.jl/stable/tutorials/cropbox/"/><meta property="twitter:url" content="https://cropbox.github.io/Cropbox.jl/stable/tutorials/cropbox/"/><link rel="canonical" href="https://cropbox.github.io/Cropbox.jl/stable/tutorials/cropbox/"/><script async src="https://www.googletagmanager.com/gtag/js?id=UA-192782823-1"></script><script>  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'UA-192782823-1', {'page_path': location.pathname + location.search + location.hash});
</script><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../search_index.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script><link href="../../assets/favicon.ico" rel="icon" type="image/x-icon"/></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../"><img src="../../assets/logo.svg" alt="Cropbox.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../../">Cropbox.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><span class="tocitem">Introduction</span><ul><li><a class="tocitem" href="../../">Cropbox</a></li><li><a class="tocitem" href="../../installation/">Installation</a></li></ul></li><li><span class="tocitem">Tutorials</span><ul><li><a class="tocitem" href="../julia/">Getting started with Julia</a></li><li class="is-active"><a class="tocitem" href>Getting started with Cropbox</a><ul class="internal"><li><a class="tocitem" href="#Installing-Cropbox"><span>Installing Cropbox</span></a></li><li><a class="tocitem" href="#Package-Loading"><span>Package Loading</span></a></li><li><a class="tocitem" href="#Creating-a-System"><span>Creating a System</span></a></li><li><a class="tocitem" href="#Configuring-Parameters"><span>Configuring Parameters</span></a></li><li><a class="tocitem" href="#Simulation"><span>Simulation</span></a></li><li><a class="tocitem" href="#Visualization"><span>Visualization</span></a></li><li><a class="tocitem" href="#Evaluation"><span>Evaluation</span></a></li></ul></li><li><a class="tocitem" href="../makingamodel/">Making a model</a></li><li><a class="tocitem" href="../usingamodel/">Using an existing model</a></li></ul></li><li><span class="tocitem">Manual</span><ul><li><a class="tocitem" href="../../guide/system/">System</a></li><li><a class="tocitem" href="../../guide/variable/">Variable</a></li><li><a class="tocitem" href="../../guide/configuration/">Configuration</a></li><li><a class="tocitem" href="../../guide/simulation/">Simulation</a></li><li><a class="tocitem" href="../../guide/visualization/">Visualization</a></li><li><a class="tocitem" href="../../guide/inspection/">Inspection</a></li></ul></li><li><a class="tocitem" href="../../gallery/">Gallery</a></li><li><span class="tocitem">Reference</span><ul><li><a class="tocitem" href="../../reference/">Index</a></li><li><a class="tocitem" href="../../reference/declaration/">Declaration</a></li><li><a class="tocitem" href="../../reference/simulation/">Simulation</a></li><li><a class="tocitem" href="../../reference/visualization/">Visualization</a></li><li><a class="tocitem" href="../../reference/inspection/">Inspection</a></li></ul></li><li><a class="tocitem" href="../../faq/">Frequently Asked Questions</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Tutorials</a></li><li class="is-active"><a href>Getting started with Cropbox</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Getting started with Cropbox</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/cropbox/Cropbox.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/cropbox/Cropbox.jl/blob/main/docs/src/tutorials/cropbox.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="cropbox"><a class="docs-heading-anchor" href="#cropbox">Getting Started with Cropbox</a><a id="cropbox-1"></a><a class="docs-heading-anchor-permalink" href="#cropbox" title="Permalink"></a></h1><p>This tutorial will cover basic macros and functions of Cropbox.</p><h2 id="Installing-Cropbox"><a class="docs-heading-anchor" href="#Installing-Cropbox">Installing Cropbox</a><a id="Installing-Cropbox-1"></a><a class="docs-heading-anchor-permalink" href="#Installing-Cropbox" title="Permalink"></a></h2><p><a href="https://github.com/cropbox/Cropbox.jl">Cropbox.jl</a> is available through Julia package manager.</p><p>You can install Cropbox running the following command in the Julia REPL.</p><pre><code class="language-julia hljs">using Pkg
Pkg.add(&quot;Cropbox&quot;)</code></pre><p>If you are using a prebuilt docker image with Cropbox included, you can skip this step.</p><h2 id="Package-Loading"><a class="docs-heading-anchor" href="#Package-Loading">Package Loading</a><a id="Package-Loading-1"></a><a class="docs-heading-anchor-permalink" href="#Package-Loading" title="Permalink"></a></h2><p>When using Cropbox, make sure to load the package into the environment by using the following command:</p><pre><code class="language-julia hljs">using Cropbox</code></pre><h2 id="Creating-a-System"><a class="docs-heading-anchor" href="#Creating-a-System">Creating a System</a><a id="Creating-a-System-1"></a><a class="docs-heading-anchor-permalink" href="#Creating-a-System" title="Permalink"></a></h2><p>In Cropbox, a model is defined by a single system or a collection of systems.</p><p>A system can be made by using a simple Cropbox macro, <code>@system</code>.</p><pre><code class="language-julia hljs">@system S</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">Main.S</code></pre><p>We have just created a system called <code>S</code>. In its current state, <code>S</code> is an empty system with no variables. Our next step is to define the variables that will represent our system.</p><h3 id="Defining-Variables"><a class="docs-heading-anchor" href="#Defining-Variables">Defining Variables</a><a id="Defining-Variables-1"></a><a class="docs-heading-anchor-permalink" href="#Defining-Variables" title="Permalink"></a></h3><p>Suppose we want the system to represent exponential growth described by this differential equation</p><p class="math-container">\[\frac{dx}{dt} = ax\]</p><p>In Cropbox, we could define the system with the following:</p><pre><code class="language-julia hljs">@system S(Controller) begin
    i       =&gt; 1   ~ preserve
    a       =&gt; 0.1 ~ preserve(parameter)
    r(a, x) =&gt; a*x ~ track
    x(r)           ~ accumulate(init = i)
end</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">Main.S</code></pre><p>Here we declared four variables.</p><ul><li>i: variable containing initial value of x which never changes (preserved)</li><li>a: variable containing constant parameter of exponential growth</li><li>r: rate variable which needs to be calculated or tracked every time step</li><li>x: state variable which accumulates by rate r over time with initial value i</li></ul><p>Each variable has been declared with a state, such as preserve or track, that describes its behavior when the system is instantiated. In Cropbox, there are 19 different variable states, which are described in more detail in the <a href="../../guide/variable/#variable">Variable section of the Manual</a>. </p><h2 id="Configuring-Parameters"><a class="docs-heading-anchor" href="#Configuring-Parameters">Configuring Parameters</a><a id="Configuring-Parameters-1"></a><a class="docs-heading-anchor-permalink" href="#Configuring-Parameters" title="Permalink"></a></h2><p>In modeling, we often need to change the value of a parameter for different systems or species. We can change the value of variables declared with the paramater tag before running the model by creating a config with the new value. For example, we could change the value of parameter a in system S to be .05 and then create an instance of S with this new value.  </p><pre><code class="language-julia hljs">config = @config(:S =&gt; :a =&gt; .05)
instance(S; config)</code></pre><table style="font-family: monospace">
<tr style="background-color: transparent">
<td colspan="4" style="text-align: left; padding: 2px; padding-left: 0px; color: rebeccapurple">S</th>
</tr>
<tr style="background-color: transparent"><td style="text-align: left; padding: 2px; padding-left: 20px; color: royalblue">context</td><td style="text-align: left; padding: 2px 0px 2px 0px; color: gray"></td><td style="text-align: center; padding: 2px 10px 2px 10px; color: gray">=</td><td style="text-align: left; padding: 2px;">&lt;Context&gt;</td></tr>
<tr style="background-color: transparent"><td style="text-align: left; padding: 2px; padding-left: 20px; color: royalblue">config</td><td style="text-align: left; padding: 2px 0px 2px 0px; color: gray"></td><td style="text-align: center; padding: 2px 10px 2px 10px; color: gray">=</td><td style="text-align: left; padding: 2px;">&lt;Config&gt;</td></tr>
<tr style="background-color: transparent"><td style="text-align: left; padding: 2px; padding-left: 20px; color: royalblue">i</td><td style="text-align: left; padding: 2px 0px 2px 0px; color: gray"></td><td style="text-align: center; padding: 2px 10px 2px 10px; color: gray">=</td><td style="text-align: left; padding: 2px;">1.0</td></tr>
<tr style="background-color: transparent"><td style="text-align: left; padding: 2px; padding-left: 20px; color: royalblue">a</td><td style="text-align: left; padding: 2px 0px 2px 0px; color: gray"></td><td style="text-align: center; padding: 2px 10px 2px 10px; color: gray">=</td><td style="text-align: left; padding: 2px;">0.05</td></tr>
<tr style="background-color: transparent"><td style="text-align: left; padding: 2px; padding-left: 20px; color: royalblue">r</td><td style="text-align: left; padding: 2px 0px 2px 0px; color: gray"></td><td style="text-align: center; padding: 2px 10px 2px 10px; color: gray">=</td><td style="text-align: left; padding: 2px;">0.05</td></tr>
<tr style="background-color: transparent"><td style="text-align: left; padding: 2px; padding-left: 20px; color: royalblue">x</td><td style="text-align: left; padding: 2px 0px 2px 0px; color: gray"></td><td style="text-align: center; padding: 2px 10px 2px 10px; color: gray">=</td><td style="text-align: left; padding: 2px;">1.0</td></tr>
</table><p>Multiple parameters can be specified using tuples or named tuples. </p><h4 id="Tuple-of-Pairs"><a class="docs-heading-anchor" href="#Tuple-of-Pairs">Tuple of Pairs</a><a id="Tuple-of-Pairs-1"></a><a class="docs-heading-anchor-permalink" href="#Tuple-of-Pairs" title="Permalink"></a></h4><pre><code class="language-julia hljs">@config :S =&gt; (:a =&gt; 1, :b =&gt; 2)</code></pre><p style="font-family: monospace">Config for 1 system:</p>
<table style="font-family: monospace">
<tr style="background-color: transparent">
<td colspan="3" style="text-align: left; padding: 2px; padding-left: 20px; color: rebeccapurple">S</th>
</tr>
<tr style="background-color: transparent"><td style="text-align: left; padding: 2px; padding-left: 40px; color: royalblue">a</td><td style="text-align: center; padding: 2px 10px 2px 10px; color: gray">=</td><td style="text-align: left; padding: 2px;">1</td></tr>
<tr style="background-color: transparent"><td style="text-align: left; padding: 2px; padding-left: 40px; color: royalblue">b</td><td style="text-align: center; padding: 2px 10px 2px 10px; color: gray">=</td><td style="text-align: left; padding: 2px;">2</td></tr>
</table>
<h4 id="Named-Tuples"><a class="docs-heading-anchor" href="#Named-Tuples">Named Tuples</a><a id="Named-Tuples-1"></a><a class="docs-heading-anchor-permalink" href="#Named-Tuples" title="Permalink"></a></h4><pre><code class="language-julia hljs">@config :S =&gt; (a = 1, b = 2)</code></pre><p style="font-family: monospace">Config for 1 system:</p>
<table style="font-family: monospace">
<tr style="background-color: transparent">
<td colspan="3" style="text-align: left; padding: 2px; padding-left: 20px; color: rebeccapurple">S</th>
</tr>
<tr style="background-color: transparent"><td style="text-align: left; padding: 2px; padding-left: 40px; color: royalblue">a</td><td style="text-align: center; padding: 2px 10px 2px 10px; color: gray">=</td><td style="text-align: left; padding: 2px;">1</td></tr>
<tr style="background-color: transparent"><td style="text-align: left; padding: 2px; padding-left: 40px; color: royalblue">b</td><td style="text-align: center; padding: 2px 10px 2px 10px; color: gray">=</td><td style="text-align: left; padding: 2px;">2</td></tr>
</table>
<h2 id="Simulation"><a class="docs-heading-anchor" href="#Simulation">Simulation</a><a id="Simulation-1"></a><a class="docs-heading-anchor-permalink" href="#Simulation" title="Permalink"></a></h2><p>The simulate function will create an instance of the system and update the values of all the variables in it at each time step until it reaches the stop time. By default, simulations in Cropbox use a time step of one hour. </p><p>Let&#39;s use Cropbox to simulate the system for ten time steps.</p><pre><code class="language-julia hljs">df = simulate(S, config = config, stop = 10)</code></pre><div><div style = "float: left;"><span>11×5 DataFrame</span></div><div style = "clear: both;"></div></div><div class = "data-frame" style = "overflow-x: scroll;"><table class = "data-frame" style = "margin-bottom: 6px;"><thead><tr class = "header"><th class = "rowNumber" style = "font-weight: bold; text-align: right;">Row</th><th style = "text-align: left;">time</th><th style = "text-align: left;">i</th><th style = "text-align: left;">a</th><th style = "text-align: left;">r</th><th style = "text-align: left;">x</th></tr><tr class = "subheader headerLastRow"><th class = "rowNumber" style = "font-weight: bold; text-align: right;"></th><th title = "Unitful.Quantity{Float64, 𝐓, Unitful.FreeUnits{(hr,), 𝐓, nothing}}" style = "text-align: left;">Quantity…</th><th title = "Float64" style = "text-align: left;">Float64</th><th title = "Float64" style = "text-align: left;">Float64</th><th title = "Float64" style = "text-align: left;">Float64</th><th title = "Float64" style = "text-align: left;">Float64</th></tr></thead><tbody><tr><td class = "rowNumber" style = "font-weight: bold; text-align: right;">1</td><td style = "text-align: right;">0.0 hr</td><td style = "text-align: right;">1.0</td><td style = "text-align: right;">0.05</td><td style = "text-align: right;">0.05</td><td style = "text-align: right;">1.0</td></tr><tr><td class = "rowNumber" style = "font-weight: bold; text-align: right;">2</td><td style = "text-align: right;">1.0 hr</td><td style = "text-align: right;">1.0</td><td style = "text-align: right;">0.05</td><td style = "text-align: right;">0.0525</td><td style = "text-align: right;">1.05</td></tr><tr><td class = "rowNumber" style = "font-weight: bold; text-align: right;">3</td><td style = "text-align: right;">2.0 hr</td><td style = "text-align: right;">1.0</td><td style = "text-align: right;">0.05</td><td style = "text-align: right;">0.055125</td><td style = "text-align: right;">1.1025</td></tr><tr><td class = "rowNumber" style = "font-weight: bold; text-align: right;">4</td><td style = "text-align: right;">3.0 hr</td><td style = "text-align: right;">1.0</td><td style = "text-align: right;">0.05</td><td style = "text-align: right;">0.0578813</td><td style = "text-align: right;">1.15763</td></tr><tr><td class = "rowNumber" style = "font-weight: bold; text-align: right;">5</td><td style = "text-align: right;">4.0 hr</td><td style = "text-align: right;">1.0</td><td style = "text-align: right;">0.05</td><td style = "text-align: right;">0.0607753</td><td style = "text-align: right;">1.21551</td></tr><tr><td class = "rowNumber" style = "font-weight: bold; text-align: right;">6</td><td style = "text-align: right;">5.0 hr</td><td style = "text-align: right;">1.0</td><td style = "text-align: right;">0.05</td><td style = "text-align: right;">0.0638141</td><td style = "text-align: right;">1.27628</td></tr><tr><td class = "rowNumber" style = "font-weight: bold; text-align: right;">7</td><td style = "text-align: right;">6.0 hr</td><td style = "text-align: right;">1.0</td><td style = "text-align: right;">0.05</td><td style = "text-align: right;">0.0670048</td><td style = "text-align: right;">1.3401</td></tr><tr><td class = "rowNumber" style = "font-weight: bold; text-align: right;">8</td><td style = "text-align: right;">7.0 hr</td><td style = "text-align: right;">1.0</td><td style = "text-align: right;">0.05</td><td style = "text-align: right;">0.070355</td><td style = "text-align: right;">1.4071</td></tr><tr><td class = "rowNumber" style = "font-weight: bold; text-align: right;">9</td><td style = "text-align: right;">8.0 hr</td><td style = "text-align: right;">1.0</td><td style = "text-align: right;">0.05</td><td style = "text-align: right;">0.0738728</td><td style = "text-align: right;">1.47746</td></tr><tr><td class = "rowNumber" style = "font-weight: bold; text-align: right;">10</td><td style = "text-align: right;">9.0 hr</td><td style = "text-align: right;">1.0</td><td style = "text-align: right;">0.05</td><td style = "text-align: right;">0.0775664</td><td style = "text-align: right;">1.55133</td></tr><tr><td class = "rowNumber" style = "font-weight: bold; text-align: right;">11</td><td style = "text-align: right;">10.0 hr</td><td style = "text-align: right;">1.0</td><td style = "text-align: right;">0.05</td><td style = "text-align: right;">0.0814447</td><td style = "text-align: right;">1.62889</td></tr></tbody></table></div><p>This will output the values of all the variables in the system as a DataFrame where each row represents one time step. </p><h2 id="Visualization"><a class="docs-heading-anchor" href="#Visualization">Visualization</a><a id="Visualization-1"></a><a class="docs-heading-anchor-permalink" href="#Visualization" title="Permalink"></a></h2><p>Once we have simulated the system, we may want to visualize the resulting data by creating a graph. This can be done by using the plot() function, specifying the name of the dataframe as the first argument and then the names of variables we want to plot on the x and y axes. </p><pre><code class="language-julia hljs">p = plot(df, :time, :x)</code></pre><img src="cb883fb8.svg" alt="Example block output"/><p>The visualize() function can also be used to run a simulation and plot the results using one command. </p><pre><code class="language-julia hljs">v = visualize(S, :time, :x ; stop=50, kind=:line)</code></pre><?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg"
     xmlns:xlink="http://www.w3.org/1999/xlink"
     xmlns:gadfly="http://www.gadflyjl.org/ns"
     version="1.2"
     width="141.42mm" height="100mm" viewBox="0 0 141.42 100"
     stroke="none"
     fill="#000000"
     stroke-width="0.3"
     font-size="3.88"
>
<defs>
  <marker id="arrow" markerWidth="15" markerHeight="7" refX="5" refY="3.5" orient="auto" markerUnits="strokeWidth">
    <path d="M0,0 L15,3.5 L0,7 z" stroke="context-stroke" fill="context-stroke"/>
  </marker>
</defs>
<g stroke="#000000" stroke-opacity="0.000" fill="#FFFFFF" id="img-ec14bfa2-1">
  <g transform="translate(70.71,50)">
    <path d="M-70.71,-50 L70.71,-50 70.71,50 -70.71,50  z" class="primitive"/>
  </g>
</g>
<g class="plotroot xscalable yscalable" id="img-ec14bfa2-2">
  <g font-size="3.53" font-family="'PT Sans','Helvetica Neue','Helvetica',sans-serif" fill="#564A55" stroke="#000000" stroke-opacity="0.000" id="img-ec14bfa2-3">
    <g transform="translate(77.13,93.72)">
      <g class="primitive">
        <text text-anchor="middle" dy="0.6em">time (hr)</text>
      </g>
    </g>
  </g>
  <g class="guide xlabels" font-size="2.82" font-family="'PT Sans Caption','Helvetica Neue','Helvetica',sans-serif" fill="#6C606B" id="img-ec14bfa2-4">
    <g transform="translate(19.84,87.04)">
      <g class="primitive">
        <text text-anchor="middle" dy="0.6em">0</text>
      </g>
    </g>
    <g transform="translate(42.75,87.04)">
      <g class="primitive">
        <text text-anchor="middle" dy="0.6em">10</text>
      </g>
    </g>
    <g transform="translate(65.67,87.04)">
      <g class="primitive">
        <text text-anchor="middle" dy="0.6em">20</text>
      </g>
    </g>
    <g transform="translate(88.59,87.04)">
      <g class="primitive">
        <text text-anchor="middle" dy="0.6em">30</text>
      </g>
    </g>
    <g transform="translate(111.5,87.04)">
      <g class="primitive">
        <text text-anchor="middle" dy="0.6em">40</text>
      </g>
    </g>
    <g transform="translate(134.42,87.04)">
      <g class="primitive">
        <text text-anchor="middle" dy="0.6em">50</text>
      </g>
    </g>
  </g>
  <g clip-path="url(#img-ec14bfa2-5)">
    <g id="img-ec14bfa2-6">
      <g pointer-events="visible" stroke-width="0.3" fill="#000000" fill-opacity="0.000" stroke="#000000" stroke-opacity="0.000" class="guide background" id="img-ec14bfa2-7">
        <g transform="translate(77.13,45.52)" id="img-ec14bfa2-8">
          <path d="M-59.29,-40.52 L59.29,-40.52 59.29,40.52 -59.29,40.52  z" class="primitive"/>
        </g>
      </g>
      <g class="guide ygridlines xfixed" stroke-dasharray="0.5,0.5" stroke-width="0.2" stroke="#D0D0E0" id="img-ec14bfa2-9">
        <g transform="translate(77.13,51.78)" id="img-ec14bfa2-10">
          <path fill="none" d="M-59.29,0 L59.29,0 " class="primitive"/>
        </g>
        <g transform="translate(77.13,18.85)" id="img-ec14bfa2-11">
          <path fill="none" d="M-59.29,0 L59.29,0 " class="primitive"/>
        </g>
      </g>
      <g class="guide xgridlines yfixed" stroke-dasharray="0.5,0.5" stroke-width="0.2" stroke="#D0D0E0" id="img-ec14bfa2-12">
        <g transform="translate(19.84,45.52)" id="img-ec14bfa2-13">
          <path fill="none" d="M0,-40.52 L0,40.52 " class="primitive"/>
        </g>
        <g transform="translate(42.75,45.52)" id="img-ec14bfa2-14">
          <path fill="none" d="M0,-40.52 L0,40.52 " class="primitive"/>
        </g>
        <g transform="translate(65.67,45.52)" id="img-ec14bfa2-15">
          <path fill="none" d="M0,-40.52 L0,40.52 " class="primitive"/>
        </g>
        <g transform="translate(88.59,45.52)" id="img-ec14bfa2-16">
          <path fill="none" d="M0,-40.52 L0,40.52 " class="primitive"/>
        </g>
        <g transform="translate(111.5,45.52)" id="img-ec14bfa2-17">
          <path fill="none" d="M0,-40.52 L0,40.52 " class="primitive"/>
        </g>
        <g transform="translate(134.42,45.52)" id="img-ec14bfa2-18">
          <path fill="none" d="M0,-40.52 L0,40.52 " class="primitive"/>
        </g>
      </g>
      <g class="plotpanel" id="img-ec14bfa2-19">
        <metadata>
          <boundingbox value="17.836666666666673mm 5.0mm 118.58468957064284mm 81.04333333333332mm"/>
          <unitbox value="-0.8727169430288398 121.03725176307705 51.74543388605768 -123.07450352615412"/>
        </metadata>
        <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" id="img-ec14bfa2-20">
          <g class="color_LCHab{Float32}(70.0f0,60.0f0,240.0f0)" stroke-dasharray="none" stroke-opacity="1" stroke="#00BFFF" id="img-ec14bfa2-21">
            <g transform="translate(77.13,68.16)" id="img-ec14bfa2-22">
              <path fill="none" d="M-57.29,15.89 L-55,15.82 -52.71,15.75 -50.42,15.67 -48.13,15.58 -45.83,15.48 -43.54,15.38 -41.25,15.26 -38.96,15.13 -36.67,14.99 -34.38,14.84 -32.08,14.66 -29.79,14.48 -27.5,14.27 -25.21,14.04 -22.92,13.79 -20.63,13.52 -18.33,13.22 -16.04,12.88 -13.75,12.52 -11.46,12.11 -9.17,11.67 -6.88,11.18 -4.58,10.65 -2.29,10.06 0,9.41 2.29,8.7 4.58,7.91 6.88,7.05 9.17,6.1 11.46,5.05 13.75,3.9 16.04,2.64 18.33,1.25 20.63,-0.28 22.92,-1.96 25.21,-3.81 27.5,-5.85 29.79,-8.09 32.08,-10.55 34.38,-13.26 36.67,-16.24 38.96,-19.52 41.25,-23.12 43.54,-27.09 45.83,-31.45 48.13,-36.25 50.42,-41.53 52.71,-47.34 55,-53.73 57.29,-60.76 " class="primitive"/>
            </g>
          </g>
        </g>
      </g>
    </g>
  </g>
  <g class="guide ylabels" font-size="2.82" font-family="'PT Sans Caption','Helvetica Neue','Helvetica',sans-serif" fill="#6C606B" id="img-ec14bfa2-23">
    <g transform="translate(16.84,51.78)" id="img-ec14bfa2-24">
      <g class="primitive">
        <text text-anchor="end" dy="0.35em">50</text>
      </g>
    </g>
    <g transform="translate(16.84,18.85)" id="img-ec14bfa2-25">
      <g class="primitive">
        <text text-anchor="end" dy="0.35em">100</text>
      </g>
    </g>
  </g>
  <g font-size="3.53" font-family="'PT Sans','Helvetica Neue','Helvetica',sans-serif" fill="#564A55" stroke="#000000" stroke-opacity="0.000" id="img-ec14bfa2-26">
    <g transform="translate(8.82,45.52)" id="img-ec14bfa2-27">
      <g class="primitive">
        <text text-anchor="end" dy="0.35em">x</text>
      </g>
    </g>
  </g>
</g>
<defs>
  <clipPath id="img-ec14bfa2-5">
    <path d="M17.84,5 L136.42,5 136.42,86.04 17.84,86.04 " />
  </clipPath>
</defs>
</svg>
<h2 id="Evaluation"><a class="docs-heading-anchor" href="#Evaluation">Evaluation</a><a id="Evaluation-1"></a><a class="docs-heading-anchor-permalink" href="#Evaluation" title="Permalink"></a></h2><p>The evaluate() function can be used to compare two datasets with a choice of evaluation metric, such as root-mean-square error. For instance, we could compare a dataset of the observed values from an experiment to the estimated values from a simulation. To do this, we would enter in the observed dataset as a DataFrame.</p><pre><code class="language-julia hljs">using DataFrames
obs = DataFrame(time = [0.0 ,1.0, 2.0, 3.0, 4.0, 5.0, 6.0, 7.0, 8.0, 9.0, 10.0]u&quot;hr&quot;, x = [1, .985, 1.06, 1.15, 1.14, 1.17, 1.24, 1.34, 1.76, 1.53, 1.68])
est = simulate(S, config = config, stop = 10)</code></pre><div><div style = "float: left;"><span>11×5 DataFrame</span></div><div style = "clear: both;"></div></div><div class = "data-frame" style = "overflow-x: scroll;"><table class = "data-frame" style = "margin-bottom: 6px;"><thead><tr class = "header"><th class = "rowNumber" style = "font-weight: bold; text-align: right;">Row</th><th style = "text-align: left;">time</th><th style = "text-align: left;">i</th><th style = "text-align: left;">a</th><th style = "text-align: left;">r</th><th style = "text-align: left;">x</th></tr><tr class = "subheader headerLastRow"><th class = "rowNumber" style = "font-weight: bold; text-align: right;"></th><th title = "Unitful.Quantity{Float64, 𝐓, Unitful.FreeUnits{(hr,), 𝐓, nothing}}" style = "text-align: left;">Quantity…</th><th title = "Float64" style = "text-align: left;">Float64</th><th title = "Float64" style = "text-align: left;">Float64</th><th title = "Float64" style = "text-align: left;">Float64</th><th title = "Float64" style = "text-align: left;">Float64</th></tr></thead><tbody><tr><td class = "rowNumber" style = "font-weight: bold; text-align: right;">1</td><td style = "text-align: right;">0.0 hr</td><td style = "text-align: right;">1.0</td><td style = "text-align: right;">0.05</td><td style = "text-align: right;">0.05</td><td style = "text-align: right;">1.0</td></tr><tr><td class = "rowNumber" style = "font-weight: bold; text-align: right;">2</td><td style = "text-align: right;">1.0 hr</td><td style = "text-align: right;">1.0</td><td style = "text-align: right;">0.05</td><td style = "text-align: right;">0.0525</td><td style = "text-align: right;">1.05</td></tr><tr><td class = "rowNumber" style = "font-weight: bold; text-align: right;">3</td><td style = "text-align: right;">2.0 hr</td><td style = "text-align: right;">1.0</td><td style = "text-align: right;">0.05</td><td style = "text-align: right;">0.055125</td><td style = "text-align: right;">1.1025</td></tr><tr><td class = "rowNumber" style = "font-weight: bold; text-align: right;">4</td><td style = "text-align: right;">3.0 hr</td><td style = "text-align: right;">1.0</td><td style = "text-align: right;">0.05</td><td style = "text-align: right;">0.0578813</td><td style = "text-align: right;">1.15763</td></tr><tr><td class = "rowNumber" style = "font-weight: bold; text-align: right;">5</td><td style = "text-align: right;">4.0 hr</td><td style = "text-align: right;">1.0</td><td style = "text-align: right;">0.05</td><td style = "text-align: right;">0.0607753</td><td style = "text-align: right;">1.21551</td></tr><tr><td class = "rowNumber" style = "font-weight: bold; text-align: right;">6</td><td style = "text-align: right;">5.0 hr</td><td style = "text-align: right;">1.0</td><td style = "text-align: right;">0.05</td><td style = "text-align: right;">0.0638141</td><td style = "text-align: right;">1.27628</td></tr><tr><td class = "rowNumber" style = "font-weight: bold; text-align: right;">7</td><td style = "text-align: right;">6.0 hr</td><td style = "text-align: right;">1.0</td><td style = "text-align: right;">0.05</td><td style = "text-align: right;">0.0670048</td><td style = "text-align: right;">1.3401</td></tr><tr><td class = "rowNumber" style = "font-weight: bold; text-align: right;">8</td><td style = "text-align: right;">7.0 hr</td><td style = "text-align: right;">1.0</td><td style = "text-align: right;">0.05</td><td style = "text-align: right;">0.070355</td><td style = "text-align: right;">1.4071</td></tr><tr><td class = "rowNumber" style = "font-weight: bold; text-align: right;">9</td><td style = "text-align: right;">8.0 hr</td><td style = "text-align: right;">1.0</td><td style = "text-align: right;">0.05</td><td style = "text-align: right;">0.0738728</td><td style = "text-align: right;">1.47746</td></tr><tr><td class = "rowNumber" style = "font-weight: bold; text-align: right;">10</td><td style = "text-align: right;">9.0 hr</td><td style = "text-align: right;">1.0</td><td style = "text-align: right;">0.05</td><td style = "text-align: right;">0.0775664</td><td style = "text-align: right;">1.55133</td></tr><tr><td class = "rowNumber" style = "font-weight: bold; text-align: right;">11</td><td style = "text-align: right;">10.0 hr</td><td style = "text-align: right;">1.0</td><td style = "text-align: right;">0.05</td><td style = "text-align: right;">0.0814447</td><td style = "text-align: right;">1.62889</td></tr></tbody></table></div><p>We compare this dataset to the results of the simulation visually by adding it to the our previous plot <code>p</code> using the plot!() function. </p><pre><code class="language-julia hljs">plot!(p,obs, :time, :x)</code></pre><img src="dd8f79f8.svg" alt="Example block output"/><p>Then, we can use the evaluate() function to calculate the error between the observed and simulated values. The index will be time by default and the target will be the variables we want to compare. </p><pre><code class="language-julia hljs">evaluate(obs, df; index = :time, target = :x, metric = :rmse)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">0.10466658629266519</code></pre><p>In addition to being able to compare two DataFrames, the evaluate() function can also be used to compare a system to a DataFrame.</p><pre><code class="language-julia hljs">evaluate(S, est; target = :a, stop = 10)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">0.05000000000000001</code></pre></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../julia/">« Getting started with Julia</a><a class="docs-footer-nextpage" href="../makingamodel/">Making a model »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.10.2 on <span class="colophon-date" title="Sunday 27 April 2025 08:22">Sunday 27 April 2025</span>. Using Julia version 1.11.5.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
